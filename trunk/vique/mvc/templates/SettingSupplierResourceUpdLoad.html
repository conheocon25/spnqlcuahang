<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<span metal:use-macro="mAdmin.xhtml/IncludeMETA"/>
		<span metal:use-macro="mAdmin.xhtml/IncludeCSS"/>
		<span metal:use-macro="mAdmin.xhtml/IncludeJS"/>
		<script type="text/javascript">
			/*<![CDATA[*/
			$(document).ready(function () {
				$('#Barcode').keyup(function (){
					var str = $('#Barcode').val();
					var Result = false;
					var Name = "";
					
					if (str.length <1){
						$('#BarcodeMessage').html("Ít nhất 1 kí tự");						
					}else{
						URL = "/barcode/"+str;
						$.ajax({
							type: "POST",
							async: false,
							url: URL,
							dataType: 'json',			
								success: function(data){
									Result = data.Result;
									Name = data.Name;
								}
						});
						if (Result == "false")
							$('#BarcodeMessage').html("Mã vạch trùng với " + Name + ", vui lòng chọn lại mã khác");
						else
							$('#BarcodeMessage').html("Mã vạch đạt tiêu chuẩn, có thể dùng được");
					}
				});
			});
			/*]]>*/
		</script>
	</head>	
	<body>
		<div class="container-fluid">
			<span metal:use-macro="mAdmin.xhtml/Header"/>
			<div class="row-fluid">
				<div class="span3" />
				<div class="span9 main">
					<span metal:use-macro="mAdmin.xhtml/LocationBar"/>
					<form class="form-horizontal" tal:attributes="action Resource/getURLUpdExe" method="post">
						<div class="control-group">
							<label class="control-label" for="IdSupplier">Nhà cung cấp</label>
							<div class="controls">
								<select name="IdSupplier" id="IdSupplier">
									<option tal:repeat="Supplier1 SupplierAll" tal:attributes="value Supplier1/getId;selected php:Supplier->getId()==Supplier1->getId()">
										<span tal:content="Supplier1/getName" />
									</option>
								</select>	
							</div>
						</div>
						<div class="control-group">
							<label class="control-label" for="Name">Tên</label>
							<div class="controls">
								<input id="Name" name="Name" type="text" tal:attributes="value Resource/getName"/>
							</div>
						</div>
						<div class="control-group">
							<label class="control-label" for="NameShort">Tên ngắn gọn</label>
							<div class="controls">
								<input id="NameShort" name="NameShort" type="text" tal:attributes="value Resource/getNameShort"/>
							</div>
						</div>
						<div class="control-group">
							<label class="control-label" for="Unit">Đơn vị</label>
							<div class="controls">
								<select name="Unit" id="Unit">
									<option tal:repeat="Unit UnitAll" tal:attributes="value Unit/getName;selected php:Resource->getUnit()==Unit->getName()">
										<span tal:content="Unit/getName" />
									</option>
								</select>	
							</div>
						</div>
						<div class="control-group">
							<label class="control-label" for="PriceImport">Giá nhập</label>
							<div class="controls">
								<input id="PriceImport" name="PriceImport" type="text" tal:attributes="value Resource/getPriceImport"/>
							</div>
						</div>
						<div class="control-group">
							<label class="control-label" for="PriceExport">Giá bán</label>
							<div class="controls">
								<input id="PriceExport" name="PriceExport" type="text" tal:attributes="value Resource/getPriceExport"/>
							</div>
						</div>
						<div class="control-group">
							<label class="control-label" for="Description">Diễn giải</label>
							<div class="controls">
								<input id="Description" name="Description" type="text" tal:attributes="value Resource/getDescription"/>	
							</div>
						</div>
						<div class="control-group">
							<label class="control-label" for="Barcode">Mã vạch</label>
							<div class="controls">
								<input id="Barcode" name="Barcode" type="text" tal:attributes="value Resource/getBarcode"/>
								<span id="BarcodeMessage" class="help-inline" />
							</div>							
						</div>							
						<div class="control-group">
							<div class="controls">
								<button type="submit" class="btn" value="submit-value">Cập nhật</button>
							</div>
						</div>
					</form>
				</div>
			</div>
			<span metal:use-macro="mAdmin.xhtml/Footer"/>
		</div>
	</body>
</html>